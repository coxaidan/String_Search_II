<html>
<head>

    <!-- Bootstrap CSS Stuff -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <!-- Add icon library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- My Style sheet -->
    <link rel="stylesheet" href='/static/styles.css' />

</head>

<body>
    <div class="container-fluid">
        
        <!-- The header info of our page (logo, title, etc) -->
        <div class="searchHeader">
            <img src="static/Rhode-Island-Rams-logo.png"/>
            <div class="title">
                <h1>CSC212 Search II Project</h1>
                <div>By: Aidan Cox, Nicholas Mendes, Emily Lavoie, Bilguuntur Munkhzaya</div>
            </div>
        </div>
        
        <!-- The rest of the search input controls. Its in a form so we can post the input to our web app -->
        <form method="POST" action="/search_results" enctype="multipart/form-data" onsubmit="return validateInput()" >

            <!-- The search bar (Algorith, pattern and search button) -->
            <div class="search-bar">

                <!-- Search algorithm dropdown -->
                <section>
                    <label>Search Algorithm</label>
                    <span class="input-group-text">
                        <select name="searchType" class="custom-select form-select form-select-md">
                            <option value="KMP" selected="">Knuth Morris Pratt Algorithm</option>
                            <option value="BM">Boyer Moore Algorithm</option>
                        </select>
                    </span>
                </section>

                <!-- Pattern input from the user -->
                <section>
                    <label>Search Pattern</label> <span id="patternError" hidden="true" class="error-message">* * * Please enter a pattern</span>
                    <input name="pattern" id="pattern" type="text" placeholder="Enter a search pattern" class="form-control form-control-md" />
                </section>

                <!-- Search button  -->
                <section>
                    <button id="search-button" type="submit" class="btn btn-primary btn-md">
                        <i class="fa fa-search"></i> Search Now
                    </button>
                </section>
            </div>

            <!-- The Choose File input -->
            <section>
                <label>Text Source</label> <span id="textError" hidden="true" class="error-message">* * * Please provide some text to search</span>
                <input id="searchFile" name="searchFile" type="file" class="form-control form-control-md">
            </section>
            
            <!-- Text area showing the text we are about to search through -->
            <textarea name="txt" id="file-preview" class="form-control textPreview" rows="15"></textarea>
        </form>
    </div>

    <!-- Our Javascript stuff -->
    <script src="/static/search.js">
    </script>

    <!-- Add some event listners to some html elements -->
    <script>

        // Event when a file is selected from the open dialog
        document.getElementById("searchFile").onchange = function () {
            // Show the file content in the text area
            loadSearchText();
        }

        // Event when you type in the pattern input field
        document.getElementById("pattern").onkeyup = function (evt) {
            // Make sure we have some text
            validatePattern();
        }

        // Event when you type in the text area field
        document.getElementById("file-preview").onkeyup = function (evt) {
            // Make sure we have some text
            validateText();
        }

    </script>

    <!-- Bootstrap JS stuff -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous">
    </script>

</body>
</html>